COURS SUR LES FICHIERS ET DOSSIERS :
ğŸ§­ Plan dâ€™apprentissage : OpÃ©rations sur les fichiers en PHP

ğŸ§© Ã‰tape 1 : Ouvrir / CrÃ©er un fichier =======================================================
âœ… Fonction : fopen()

$fichier = fopen("exemple.txt", "w"); // w = write (Ã©criture)
ğŸ”¸ Modes dâ€™ouverture courants :
Mode	Signification
"r"	Lire uniquement
"w"	Ã‰crire (efface si le fichier existe)
"a"	Ajouter Ã  la fin
"x"	CrÃ©er, erreur si dÃ©jÃ  existant
"r+"	Lire + Ã©crire
"a+"	Lire + Ã©crire en ajout


ğŸ§© Ã‰tape 2 : Ã‰crire dans un fichier
=======================================================
âœ… Fonction : fwrite()

$fichier = fopen("exemple.txt", "w");
fwrite($fichier, "Bonjour le monde !");
fclose($fichier); // Toujours fermer aprÃ¨s usage
ğŸ”’ Important : fclose() libÃ¨re le fichier. Toujours lâ€™appeler aprÃ¨s Ã©criture/lecture.

ğŸ§© Ã‰tape 3 : Lire un fichier
=======================================================

âœ… Fonction : fread() ou file_get_contents()

$fichier = fopen("exemple.txt", "r");
$contenu = fread($fichier, filesize("exemple.txt"));
fclose($fichier);
echo $contenu;
âœ… Alternatif plus simple :

$contenu = file_get_contents("exemple.txt");
echo $contenu;

ğŸ§© Ã‰tape 4 : Lire ligne par ligne
=======================================================
$fichier = fopen("exemple.txt", "r");
while (!feof($fichier)) {
    $ligne = fgets($fichier);
    echo $ligne . "<br>";
}
fclose($fichier);

ğŸ§© Ã‰tape 5 : VÃ©rifier l'existence dâ€™un fichier
=======================================================
âœ… Fonction : file_exists()

if (file_exists("exemple.txt")) {
    echo "Le fichier existe.";
} else {
    echo "Le fichier n'existe pas.";
}

ğŸ§© Ã‰tape 6 : Supprimer un fichier
=======================================================
âœ… Fonction : unlink()

if (file_exists("exemple.txt")) {
    unlink("exemple.txt");
    echo "Fichier supprimÃ©.";
}

ğŸ§© Ã‰tape 7 : Ajouter Ã  la fin dâ€™un fichier
=======================================================
$fichier = fopen("exemple.txt", "a"); // "a" = append
fwrite($fichier, "\nNouvelle ligne");
fclose($fichier);

ğŸ§© Ã‰tape 8 : TÃ©lÃ©charger un fichier cÃ´tÃ© client (forcÃ©)
=======================================================
$file = "exemple.txt";
if (file_exists($file)) {
    header('Content-Description: File Transfer');
    header('Content-Type: application/octet-stream');
    header('Content-Disposition: attachment; filename="'.basename($file).'"');
    readfile($file);
    exit;
}

ğŸ§© Ã‰tape 9 : CrÃ©er un dossier
=======================================================
mkdir("mon_dossier", 0777, true);

ğŸ§© Ã‰tape 10 : Lire tous les fichiers dâ€™un dossier
=======================================================
$files = scandir("mon_dossier");
foreach ($files as $file) {
    if ($file != '.' && $file != '..') {
        echo $file . "<br>";
    }
}


ğŸ§ª Exercices pratiques proposÃ©s :
CrÃ©er un fichier et y Ã©crire une phrase.
Lire ce fichier et afficher son contenu.
Ajouter une nouvelle ligne sans effacer lâ€™existant.
Supprimer le fichier via script PHP.
CrÃ©er un formulaire HTML pour envoyer un texte â†’ stocker dans un fichier.
CrÃ©er un fichier .log et Ã©crire automatiquement lâ€™heure de chaque visite.



Pour dÃ©placer un fichier dans un dossier en PHP, tu peux utiliser la fonction rename(), qui sert Ã  renommer ou dÃ©placer un fichier.
=======================================================
âœ… Syntaxe de base

rename("chemin/original/fichier.txt", "nouveau/chemin/fichier.txt");
ğŸ§° Exemple concret : dÃ©placer un fichier

$source = "uploads/fichier.txt";
$destination = "archives/fichier.txt";

if (file_exists($source)) {
    if (rename($source, $destination)) {
        echo "Fichier dÃ©placÃ© avec succÃ¨s.";
    } else {
        echo "Ã‰chec du dÃ©placement.";
    }
} else {
    echo "Le fichier source n'existe pas.";
}



ğŸ§  Quâ€™est-ce que JSON ?
JSON (JavaScript Object Notation) est un format lÃ©ger dâ€™Ã©change de donnÃ©es, facile Ã  lire et Ã  Ã©crire pour les humains, facile Ã  parser et gÃ©nÃ©rer pour les machines.

Câ€™est lâ€™un des formats les plus utilisÃ©s pour transfÃ©rer des donnÃ©es entre un client (navigateur) et un serveur (ex : PHP).

ğŸ“¦ Structure dâ€™un objet JSON

ğŸ”¹ DonnÃ©es de type clÃ©-valeur :

{
  "nom": "Alice",
  "age": 25,
  "estAdmin": false
}

ğŸ”¹ Types de donnÃ©es autorisÃ©s : Type JSON	Ã‰quivalent

ChaÃ®ne	"texte"
Nombre	25, 3.14
BoolÃ©en	true, false
Objet	{ "cle": "valeur" }
Tableau	[1, 2, 3]
Null Null

============================= JAVASCRIPT ============================

ğŸ› ï¸ JSON en JavaScript
ğŸ”¸ Convertir un objet JS â†’ JSON (string)

const user = { nom: "Alice", age: 25 };
const json = JSON.stringify(user);
console.log(json); // '{"nom":"Alice","age":25}'

ğŸ”¸ Convertir une chaÃ®ne JSON â†’ objet JS

const jsonString = '{"nom":"Alice","age":25}';
const user = JSON.parse(jsonString);
console.log(user.nom); // Alice

============================= PHP ============================

JSON en PHP

ğŸ”¸ Convertir un tableau PHP â†’ JSON
$data = [
  "nom" => "Alice",
  "age" => 25,
  "admin" => false
];
$json = json_encode($data);
echo $json; // {"nom":"Alice","age":25,"admin":false}


ğŸ”¸ Convertir une chaÃ®ne JSON â†’ tableau PHP
$json = '{"nom":"Alice","age":25,"admin":false}';
$data = json_decode($json, true); // true = tableau associatif
echo $data['nom']; // Alice


ğŸ”¸ Sans true â†’ objet PHP
$data = json_decode($json);
echo $data->nom; // Alice


========================== ğŸ” DÃ©tails importants =========================

ğŸ” Encodage UTF-8
JSON est toujours encodÃ© en UTF-8. Attention aux accents et caractÃ¨res spÃ©ciaux si ton fichier PHP nâ€™est pas en UTF-8.

âš ï¸ ProblÃ¨mes frÃ©quents avec json_encode()
Il Ã©choue silencieusement si des caractÃ¨res spÃ©ciaux ne sont pas encodables.

Utilise json_last_error() pour vÃ©rifier les erreurs.


if (json_last_error() !== JSON_ERROR_NONE) {
    echo "Erreur JSON : " . json_last_error_msg();
}


==================== ğŸ“¤ JSON dans les API (PHP <-> JS)  ==================


 ============== JS =============
ğŸ”¸ Exemple d'envoi depuis JS vers PHP via fetch() :

fetch("serveur.php", {
  method: "POST",
  headers: { "Content-Type": "application/json" },
  body: JSON.stringify({ nom: "Alice", age: 25 })
});

 ============== PHP =============
ğŸ”¸ Traitement cÃ´tÃ© PHP :

$donnees = json_decode(file_get_contents("php://input"), true);
echo "Nom : " . $donnees["nom"];